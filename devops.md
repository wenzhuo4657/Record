# **FluxFlow**项目计划书

## 阶段一：需求分析

### 1.1 项目背景与目标
- **项目名称**:      **FluxFlow**

- **项目背景**: 在日常生活中，我突然意识到自己没有计划，或者说需要周期性的记录某些任务的进度，这些记录对于我评判目前的状态以及当下改变什么习惯非常有帮助。

- **业务目标**: 

  -   1， 记录每日活动，提供可配置的打分标签，例如优、良、差、摆烂

  -   2， 对未来的规划视图，

    ​        规划类型

    -    1）预期任务类型： 下周一上午11点有会议

    -    2）期望长期保持的每日习惯， 

      ​    提供功能：

      ​    1，第三方通知功能，用于提醒

      ​    2，统一展示（查看当天需要做什么），和单任务的展示（主要用于查看长期习惯的保持进度）

      ​    3，对于每个时间节点（预期任务只有一个，长期习惯有多个）和任务都要有，完成与否的标准

  -   3，手帐功能，快速记录当前的想法，它们是碎片化的，通常是任务类型，但没办法写入规划的当前完成，只是一些想法

  -   4， agent，动态扫描用户当天任务和手帐，实现动态通知和建议，此外还需要在动态设置提示词，以及允许agent在对话中不断调整提示词的功能。

     

- **成功标准**: 功能运行正常，界面美观

### 1.2 功能需求分析
#### 核心功能
| 功能模块 | 优先级 | 功能描述 |
|---------|--------|----------|
| 每日日报 | 高 | 记录每天行为，对当天进行打分                           |
| 规划视图 | 高 | 长期任务的记录与提醒                                   |
| 手帐 | 中 | 零碎想法的记录，这实际上只是一个单一的页面，单纯的备注 |
| 用户管理 | 高 | oauth管理用户身份，进行隔离数据                        |
| agent | 高 | 根据用户维度进行动态提供与建议，并且可以动态调整提示词 |



#### 扩展功能
| 功能模块 | 优先级 | 功能描述 |
|---------|--------|----------|
| 用户高级管理 | 低     | 对用户进行身份管理，例如成员、组长、领导人，类似于公司，又或者是学校的等级制度，他的核心在于高层可以看到成员的状态，以此来了解成员。  ps： 该功能只是模式的上的借鉴，但我看不到他实际有帮助的地方 |



### 1.3 风险分析

| 风险类型 | 风险描述 | 影响程度 | 发生概率 | 应对策略 |
|---------|----------|----------|----------|----------|
| 用户多端并发 | 用户多端登录，对同一资源同一数据进行不同修改。   场景举例：  某一端数据更新不及时， | 高       | 低       | 1，轮询更新2，冲突处理。例如： 任务打卡直接完成，内容更新进行询问（需要搭配版本号来判断是否有冲突更新） |



---

## 阶段二：系统设计

### 2.1 系统架构设计
#### 架构模式选择
- **架构类型**:  DDD架构

- **选择理由**: 企业级的项目开发，便于维护、功能测试

- **架构图**: 

  ![](https://cdn.wenzhuo4657.org/img/2025/12/4d318b825db620ee6718d2191a8ea255.png)

#### 技术栈决策
| 层级 | 技术选择 | 版本 |
|------|----------|------|
| 后端 | springboot |  |
| 缓存 | redis |  |
| 数据保存 | sqlite |  |
| 部署 | docker/jar |  |

### 2.2 模块设计
#### 系统模块划分
```
[项目名称]
├── auth(auth Module)
│   ├── 用户注册、登录和离线 ，多端登录处理
├── Types(Types Module)
│   ├── 文档类型管理，伴随用户的文档id
├── ItemEdit(ItemEdit Module)
│   ├── 根据文档类型**增删改查**对应的item，他负责项目的主要流程
│   ├── 设计版本号机制，处理多端修改
├── System(System Module)
│   ├── 数据库导入和导出，自动适应版本演进
│   ├── 设计版本号机制，处理多端修改
│   ├── 用户个人配置保存
├── Tell(Tell Module)
│   ├── 适配第三方通知api
│   ├── 实现本项目通知需求
```

#### 模块间依赖关系
说明： 该依赖关系只是部分功能依赖，并非完全依赖

![](https://cdn.wenzhuo4657.org/img/2025/12/b976e554c7d615c7d58243e390829ee1.png)




### 
### 2.3 数据库设计

#### 数据库架构概述
- **数据库类型**: SQLite 3.x (文件型数据库)
- **ORM框架**: MyBatis + HikariCP
- **设计模式**: 基于DDD的分层架构
- **数据库文件位置**: `{dir.beifen}/{dir.db}` (默认: `~/daily/beifen/beifen.db`)
- **初始化方式**: 自动初始化 (schema.sql + data.sql)

#### 数据库ER关系图

![](https://cdn.wenzhuo4657.org/img/2025/12/32c4c198b4a7064c23a47271a023db38.png)



## 阶段三：开发计划

说明： 当前项目计划书开始编写前，项目已具备初始框架。

### 3.1 迭代开发计划
#### 第一阶段：重构代码（预计12.2-12.15）
- [x] 前后端代码重构，专注于单一功能体验，解决微小bug

- [ ] 通知对接

- [ ] 前后端数据交互格式重构，提示信息明确化，

  

  ​	

#### 第二阶段：核心功能开发 (预计 [X] 周)
- [ ] [核心功能1] 开发
- [ ] [核心功能2] 开发
- [ ] [核心功能3] 开发
- [ ] 单元测试编写
- [ ] 功能测试

#### 第三阶段：扩展功能开发 (预计 [X] 周)
- [ ] [扩展功能1] 开发
- [ ] [扩展功能2] 开发
- [ ] 性能优化
- [ ] 集成测试

#### 第四阶段：测试和部署 (预计 [X] 周)
- [ ] 系统测试
- [ ] 用户验收测试
- [ ] 部署准备
- [ ] 正式上线

### 
---

## 阶段四：实现与开发

### 4.1 开发环境配置
#### 必需工具
- [ ] IDE: [VS Code/IntelliJ IDEA等]
- [ ] 版本控制: Git
- [ ] 包管理器: [npm/yarn/pip等]
- [ ] 数据库工具: [MySQL Workbench/pgAdmin等]
- [ ] API测试工具: [Postman/Insomnia等]

#### 环境清单
- [ ] 开发环境: [本地开发配置]
- [ ] 测试环境: [测试服务器配置]
- [ ] 预生产环境: [预生产服务器配置]
- [ ] 生产环境: [生产服务器配置]

### 4.2 代码实现计划
#### 核心模块实现优先级
1. **用户认证模块** (预计 [X] 天)
   - [ ] 用户注册功能
   - [ ] 用户登录功能
   - [ ] 密码加密存储
   - [ ] JWT token生成和验证

2. **[核心模块1]** (预计 [X] 天)
   - [ ] [子功能1] 实现
   - [ ] [子功能2] 实现
   - [ ] [子功能3] 实现

3. **[核心模块2]** (预计 [X] 天)
   - [ ] [子功能1] 实现
   - [ ] [子功能2] 实现
   - [ ] [子功能3] 实现

### 4.3 数据库实现
#### 建表脚本
```sql
-- 用户表
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 其他表...
```

#### 初始数据
```sql
-- 系统配置初始数据
INSERT INTO system_config (config_key, config_value) VALUES
('site_name', '我的项目'),
('max_users', '1000');
```

---

## 阶段五：测试与质量保证

### 5.1 测试策略
#### 测试类型和覆盖范围
| 测试类型 | 负责人 | 覆盖范围 | 工具/方法 |
|---------|--------|----------|-----------|
| 单元测试 | 开发人员 | 函数级别测试覆盖率>80% | Jest/PyTest等 |
| 集成测试 | 开发人员 | 模块间接口测试 | 自定义测试框架 |
| 系统测试 | 测试工程师 | 端到端功能测试 | Selenium/Cypress等 |
| 性能测试 | 测试工程师 | 负载、压力测试 | JMeter/LoadRunner |
| 安全测试 | 安全工程师 | 漏洞扫描、渗透测试 | OWASP ZAP等 |

### 5.2 测试用例设计
#### 功能测试用例
| 用例编号 | 测试功能 | 测试步骤 | 预期结果 | 优先级 |
|---------|----------|----------|----------|--------|
| TC001 | 用户注册 | 1. 打开注册页面<br>2. 输入有效用户信息<br>3. 点击注册按钮 | 注册成功，跳转到登录页 | 高 |
| TC002 | 用户登录 | 1. 打开登录页面<br>2. 输入正确的用户名密码<br>3. 点击登录按钮 | 登录成功，跳转到首页 | 高 |

### 5.3 缺陷管理
#### 缺陷分级标准
- **严重 (Critical)**: 系统崩溃、数据丢失、安全漏洞
- **重要 (Major)**: 功能无法使用、性能严重问题
- **一般 (Minor)**: 功能部分问题、UI显示问题
- **轻微 (Trivial)**: 拼写错误、样式微调

#### 缺陷处理流程
1. 缺陷发现和记录
2. 缺陷分类和优先级评定
3. 分配给相应开发人员
4. 缺陷修复和验证
5. 缺陷关闭和记录

---

## 阶段六：部署与运维

### 6.1 部署架构
#### 环境配置
| 环境 | 服务器配置 | 数据库 | 缓存 | 其他服务 |
|------|------------|--------|------|----------|
| 开发环境 | [配置] | [配置] | [配置] | [配置] |
| 测试环境 | [配置] | [配置] | [配置] | [配置] |
| 生产环境 | [配置] | [配置] | [配置] | [配置] |

### 6.2 CI/CD 流程
#### 持续集成 (CI)
- [ ] 代码提交触发构建
- [ ] 自动化测试执行
- [ ] 代码质量检查
- [ ] 安全扫描

#### 持续部署 (CD)
- [ ] 自动化部署到测试环境
- [ ] 生产环境部署审批流程
- [ ] 回滚机制
- [ ] 部署通知

### 6.3 监控与日志
#### 监控指标
- **系统指标**: CPU使用率、内存使用率、磁盘空间
- **应用指标**: 响应时间、错误率、吞吐量
- **业务指标**: 用户活跃度、功能使用率

#### 日志管理
- [ ] 应用日志收集
- [ ] 错误日志告警
- [ ] 访问日志分析
- [ ] 日志保留策略

---

## 阶段七：项目管理

### 7.1 进度管理
#### 项目进度跟踪
| 任务 | 开始日期 | 预计结束日期 | 实际结束日期 | 状态 | 负责人 |
|------|----------|--------------|--------------|------|--------|
| 需求分析 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |
| 系统设计 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |
| 开发阶段1 | [日期] | [日期] | [日期] | 完成/进行中/延期 | [姓名] |

### 7.2 风险管理
#### 风险跟踪表
| 风险ID | 风险描述 | 影响程度 | 发生概率 | 应对措施 | 状态 |
|--------|----------|----------|----------|----------|------|
| R001 | 核心开发人员离职 | 高 | 中 | 技术文档完善、知识共享 | 监控中 |
| R002 | 需求频繁变更 | 中 | 高 | 敏捷开发、版本控制 | 监控中 |

### 7.3 沟通管理
#### 会议安排
- **每日站会**: [时间] - [参与人员]
- **周例会**: [时间] - [参与人员]
- **里程碑评审**: [时间] - [参与人员]
- **项目复盘**: [时间] - [参与人员]

---

## 阶段八：项目总结

### 8.1 项目评估
#### 项目目标达成情况
- [ ] 业务目标完成度: [X]%
- [ ] 功能需求完成度: [X]%
- [ ] 非功能需求达成度: [X]%
- [ ] 项目按时完成: 是/否

### 8.2 经验教训
#### 成功经验
- [项目中的成功做法1]
- [项目中的成功做法2]

#### 改进建议
- [项目中可以改进的地方1]
- [项目中可以改进的地方2]

### 8.3 后续规划
#### 维护计划
- [ ] 版本更新计划
- [ ] 技术债务处理
- [ ] 性能优化计划

#### 功能扩展
- [ ] [下一版本功能1]
- [ ] [下一版本功能2]

---

## 附录

### A. 项目文档清单
- [ ] 需求规格说明书
- [ ] 系统设计文档
- [ ] 数据库设计文档
- [ ] API文档
- [ ] 测试计划
- [ ] 用户手册
- [ ] 运维手册

### B. 参考资源
- [相关技术文档链接]
- [开发框架官方文档]
- [第三方服务文档]

### C. 联系信息
| 角色 | 姓名 | 联系方式 |
|------|------|----------|
| 项目经理 | [姓名] | [邮箱/电话] |
| 技术负责人 | [姓名] | [邮箱/电话] |
| 产品负责人 | [姓名] | [邮箱/电话] |

---

## 使用指南

1. **按阶段填写**: 严格按照从需求分析到项目总结的顺序填写
2. **保持更新**: 项目进行过程中及时更新相关信息
3. **团队协作**: 确保所有相关人员了解和遵循文档内容
4. **灵活调整**: 根据项目实际情况适当调整模板内容

记住：好的规划是项目成功的基础，但要保持灵活性以适应变化！